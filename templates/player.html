<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Enhanced Media Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4cc9f0;
            --secondary: #7209b7;
            --dark: #1a1a2e;
            --darker: #16213e;
            --light: #f8f9fa;
            --gray: #b0b0b0;
            --radius: 16px;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            --transition: all 0.3s ease;
        }
        * {margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,var(--dark),var(--darker));color:var(--light);min-height:100vh;padding:1rem;}
        .container{max-width:800px;margin:auto;}
        header{text-align:center;padding:1.5rem;background:rgba(22,33,62,0.8);border-radius:var(--radius);margin-bottom:1.5rem;}
        h1{font-size:2rem;font-weight:700;background:linear-gradient(90deg,var(--primary-light),var(--primary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
        .subtitle{color:var(--gray);}
        .player-container{background:rgba(30,30,46,0.9);border-radius:var(--radius);padding:1.5rem;box-shadow:var(--shadow);}
        .media-display{position:relative;aspect-ratio:16/9;background:#000;border-radius:12px;margin-bottom:1.5rem;overflow:hidden;}
        video{width:100%;height:100%;border-radius:12px;}
        .audio-visualizer{display:flex;align-items:center;justify-content:center;height:100%;background:linear-gradient(135deg,var(--darker),var(--dark));}
        .visualizer-bars{display:flex;align-items:flex-end;gap:4px;width:80%;height:80px;}
        .visualizer-bar{width:6px;background:linear-gradient(to top,var(--primary),var(--primary-light));border-radius:3px;transition:height 0.2s ease;}
        .controls{display:flex;flex-direction:column;gap:1rem;}
        .progress-container{height:8px;background:rgba(255,255,255,0.15);border-radius:4px;cursor:pointer;overflow:hidden;}
        .progress-bar{height:100%;background:linear-gradient(90deg,var(--primary-light),var(--primary));width:0%;transition:width 0.1s linear;}
        .time-display{display:flex;justify-content:space-between;color:var(--gray);}
        .control-buttons{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:.75rem;}
        .btn{background:rgba(255,255,255,0.1);border:none;color:var(--light);cursor:pointer;padding:.75rem;border-radius:50%;}
        .btn-play-pause{width:60px;height:60px;background:linear-gradient(135deg,var(--primary-light),var(--primary));}
        .volume-container{display:flex;align-items:center;gap:8px;}
        .volume-slider{width:80px;height:5px;background:rgba(255,255,255,0.2);border-radius:3px;cursor:pointer;}
        .volume-level{height:100%;background:linear-gradient(90deg,var(--primary-light),var(--primary));border-radius:3px;width:80%;}
        .media-info{margin-top:1.5rem;background:rgba(0,0,0,0.2);padding:1.2rem;border-radius:12px;}
        .info-row{display:flex;justify-content:space-between;border-bottom:1px solid rgba(255,255,255,0.05);padding:.4rem 0;}
        .download-btn{background:linear-gradient(135deg,var(--primary-light),var(--primary));color:#fff;border:none;border-radius:50px;padding:.8rem 1.5rem;display:inline-flex;align-items:center;gap:.5rem;text-decoration:none;}
        .notification{position:fixed;bottom:20px;right:20px;background:var(--primary);color:#fff;padding:.8rem 1.2rem;border-radius:8px;transform:translateY(100px);opacity:0;transition:.3s;}
        .notification.show{transform:translateY(0);opacity:1;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>{{ title }}</h1>
            <p class="subtitle">Premium experience for video and audio playback</p>
        </header>
        <div class="player-container">
            <div class="media-display">
                <div class="loading-spinner" id="loadingSpinner"></div>
                <video id="mediaElement" controls style="display:none;">
                    <source src="{{ media_url }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="audio-visualizer" id="audioVisualizer">
                    <div class="audio-content">
                        <i class="fas fa-music audio-icon"></i>
                        <div class="visualizer-bars" id="visualizerBars"></div>
                        <div class="audio-title" id="audioTitle">Now Playing: Sample Audio</div>
                    </div>
                </div>
            </div>
            <div class="controls">
                <div class="progress-container" id="progressContainer"><div class="progress-bar" id="progressBar"></div></div>
                <div class="time-display"><span id="currentTime">0:00</span><span id="duration">0:00</span></div>
                <div class="control-buttons">
                    <button class="btn" id="skipBackward"><i class="fas fa-backward-step"></i></button>
                    <button class="btn btn-play-pause" id="playPause"><i class="fas fa-play"></i></button>
                    <button class="btn" id="skipForward"><i class="fas fa-forward-step"></i></button>
                    <div class="volume-container">
                        <button class="btn" id="muteToggle"><i class="fas fa-volume-high"></i></button>
                        <div class="volume-slider" id="volumeSlider"><div class="volume-level" id="volumeLevel"></div></div>
                    </div>
                    <button class="btn" id="fullscreenToggle"><i class="fas fa-expand"></i></button>
                </div>
            </div>
            <div class="media-info">
                <div class="info-row"><span><strong>File:</strong></span><span id="fileName">{{ title }}</span></div>
                <div class="info-row"><span><strong>Size:</strong></span><span id="fileSize">{{ fileSizeMB }}</span></div>
                <div class="info-row"><span><strong>Type:</strong></span><span id="fileType">{{ media_type.upper() }}</span></div>
                <a href="{{ media_url }}" class="download-btn" id="downloadBtn"><i class="fas fa-download"></i> Download</a>
            </div>
        </div>
    </div>
    <div class="notification" id="notification"><i class="fas fa-check-circle"></i> <span>Settings saved successfully</span></div>
    <footer><p>Enhanced Media Player &copy; 2025 | Premium Media Experience</p></footer>
    <script>
        const media=document.getElementById('mediaElement'),playPause=document.getElementById('playPause'),progressBar=document.getElementById('progressBar'),progressContainer=document.getElementById('progressContainer'),muteToggle=document.getElementById('muteToggle'),volumeSlider=document.getElementById('volumeSlider'),volumeLevel=document.getElementById('volumeLevel'),skipBackward=document.getElementById('skipBackward'),skipForward=document.getElementById('skipForward'),fullscreenToggle=document.getElementById('fullscreenToggle'),notification=document.getElementById('notification');let isPlaying=false,isMuted=false,currentVolume=0.8;media.volume=currentVolume;volumeLevel.style.width=`${currentVolume*100}%`;playPause.addEventListener('click',togglePlayPause);media.addEventListener('click',togglePlayPause);media.addEventListener('timeupdate',updateProgress);progressContainer.addEventListener('click',setProgress);muteToggle.addEventListener('click',toggleMute);volumeSlider.addEventListener('click',setVolume);skipBackward.addEventListener('click',()=>skipTime(-10));skipForward.addEventListener('click',()=>skipTime(10));fullscreenToggle.addEventListener('click',toggleFullscreen);
        function togglePlayPause(){if(media.paused){media.play();playPause.innerHTML='<i class="fas fa-pause"></i>';isPlaying=true;}else{media.pause();playPause.innerHTML='<i class="fas fa-play"></i>';isPlaying=false;}}
        function updateProgress(){if(!media.duration)return;const progress=(media.currentTime/media.duration)*100;progressBar.style.width=`${progress}%`;}
        function setProgress(e){const rect=progressContainer.getBoundingClientRect();const percent=(e.clientX-rect.left)/rect.width;media.currentTime=percent*media.duration;}
        function setVolume(e){const rect=volumeSlider.getBoundingClientRect();const percent=Math.min(Math.max((e.clientX-rect.left)/rect.width,0),1);media.volume=percent;currentVolume=percent;volumeLevel.style.width=`${percent*100}%`;muteToggle.innerHTML=percent===0?'<i class="fas fa-volume-mute"></i>':'<i class="fas fa-volume-high"></i>';}
        function toggleMute(){isMuted=!isMuted;media.muted=isMuted;muteToggle.innerHTML=isMuted?'<i class="fas fa-volume-mute"></i>':'<i class="fas fa-volume-high"></i>';volumeLevel.style.width=isMuted?'0%':`${currentVolume*100}%`;}
        function skipTime(s){media.currentTime+=s;}
        function toggleFullscreen(){if(!document.fullscreenElement){media.requestFullscreen?.();fullscreenToggle.innerHTML='<i class="fas fa-compress"></i>';}else{document.exitFullscreen?.();fullscreenToggle.innerHTML='<i class="fas fa-expand"></i>';}}
        function showNotification(m){notification.querySelector('span').textContent=m;notification.classList.add('show');setTimeout(()=>notification.classList.remove('show'),3000);}
    </script>
</body>
</html>
